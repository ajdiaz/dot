# vim:ft=dosini
[general]
accounts = ajdiaz.me, connectical.com
pythonfile = ~/.config/offlineimap/pass_helper.py
fsync = False

[Account ajdiaz.me]
localrepository  = ajdiaz.me-local
remoterepository = ajdiaz.me-remote
postsynchook     = notmuch new && afew --tag --new && ~/.config/offlineimap/notify.sh
presynchook      = notmuch search --format=text0 --output=files folder:INBOX AND tag:deleted | xargs -0r rm && afew --move-mails

[Repository ajdiaz.me-local]
type = Maildir
localfolders = ~/.mail/ajdiaz.me
sep = /

[Repository ajdiaz.me-remote]
type = IMAP
ssl  = yes
sslcacertfile  = ~/.config/offlineimap/certs/mail.gandi.net.chain.crt
remotehost     = mail.gandi.net
remoteport     = 993
remoteusereval = get_username("mail.gandi.net")
remotepasseval = get_password("mail.gandi.net")
#createfolders  = True

[Account connectical.com]
localrepository  = connectical.com-local
remoterepository = connectical.com-remote
postsynchook     = notmuch new && afew --tag --new && ~/.config/offlineimap/notify.sh
presynchook      = notmuch search --format=text0 --output=files folder:trash AND tag:deleted AND date:..31days | xargs -0r rm && afew --move-mails

[Repository connectical.com-local]
type = Maildir
localfolders = ~/.mail/connectical.com
sep = /
nametrans = lambda folder: {
                            'Drafts':    '[Gmail]/Drafts',
                            'Flagged':   '[Gmail]/Starred',
                            'Important': '[Gmail]/Important',
                            'INBOX':     '[Gmail]/All Mail',
                            'Spam':      '[Gmail]/Spam',
                            'Trash':     '[Gmail]/Trash',
                            'Sent':      '[Gmail]/Sent Mail',
                           }.get(folder, folder)

[Repository connectical.com-remote]
type = Gmail
ssl = yes
remoteusereval = get_username("mail.connectical.com")
remotepasseval = get_password("mail.connectical.com")
nametrans = lambda folder:      re.sub('\[Gmail\]\/All Mail', 'INBOX',
                                re.sub('\[Gmail\]\/Drafts', 'Drafts',
                                re.sub('\[Gmail\]\/Important', 'Important',
                                re.sub('\[Gmail\]\/Sent Mail', 'Sent',
                                re.sub('\[Gmail\]\/Spam', 'Spam',
                                re.sub('\[Gmail\]\/Starred', 'Flagged',
                                re.sub('\[Gmail\]\/Trash', 'Trash', folder)))))))
folderfilter = lambda folder: folder in [
                                          '[Gmail]/All Mail',
                                          '[Gmail]/Sent Mail',
                                          '[Gmail]/Drafts',
                                          '[Gmail]/Trash',
                                          '[Gmail]/Starred',
                                        ]
# Necessary as of OfflineIMAP 6.5.4
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
#subscribedonly = yes
